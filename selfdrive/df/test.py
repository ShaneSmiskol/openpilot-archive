import time
from selfdrive.df import df_wrapper
df_model = df_wrapper.get_wrapper()
df_model.init_model()
'''start = time.time()
for i in range(30):
 model_output = df_model.run_model(0.8653078153514447,
  0.46805728618371273,
  0.46805728618371273,
  0.28780443294609244,
  0.01075646532123655)
print(time.time() - startl)'''

input_data = [[.6, .6, .55]]
for i in range(29):
    input_data.append([input_data[-1][0]-.01, input_data[-1][1], input_data[-1][2]-.001])
input_data = sum(input_data, [])
pred = df_model.run_model_lstm([0.0411935 , 0.        , 0.06227437, 0.04154346, 0.        ,
       0.06137184, 0.04207871, 0.        , 0.06046931, 0.04329402,
       0.        , 0.05956679, 0.04415893, 0.        , 0.05956679,
       0.04533778, 0.        , 0.05866426, 0.04607572, 0.        ,
       0.05776173, 0.04726406, 0.        , 0.05685921, 0.04848225,
       0.        , 0.05595668, 0.04919234, 0.        , 0.05505415,
       0.05014057, 0.        , 0.05415162, 0.05098257, 0.        ,
       0.0532491 , 0.05164465, 0.        , 0.05234657, 0.0524086 ,
       0.        , 0.05144404, 0.05319997, 0.        , 0.05144404,
       0.05395046, 0.        , 0.05054152, 0.05480199, 0.        ,
       0.04963899, 0.05523556, 0.        , 0.04873646, 0.05587276,
       0.        , 0.04783394, 0.05651137, 0.        , 0.04693141,
       0.05709725, 0.        , 0.04602888, 0.05798245, 0.        ,
       0.04512635, 0.05850564, 0.        , 0.04422383, 0.0587908 ,
       0.        , 0.0433213 , 0.05927362, 0.        , 0.04241877,
       0.05983164, 0.        , 0.04151625, 0.06050176, 0.        ,
       0.04061372, 0.06109134, 0.        , 0.03971119, 0.06166367,
       0.        , 0.03880866, 0.06214621, 0.        , 0.03790614,
       0.06254406, 0.        , 0.03700361, 0.06297142, 0.        ,
       0.03700361, 0.06332367, 0.        , 0.03610108, 0.06401166,
       0.        , 0.03519856, 0.06463973, 0.        , 0.03429603,
       0.06503633, 0.        , 0.0333935 , 0.06539786, 0.00583135,
       0.03249097, 0.06547374, 0.00593271, 0.03249097, 0.06527902,
       0.        , 0.03158845, 0.06463269, 0.00509005, 0.03068592])
print(pred)
'''model_output = df_model.run_model(.5, .2, .1, .5, .2)
print(model_output)
model_output = df_model.run_model(.05, .3, .4, .6, .6)
print(model_output)
model_output = df_model.run_model(.7, .85, .55, .5, .55)
print(model_output)'''